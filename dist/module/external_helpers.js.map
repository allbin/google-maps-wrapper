{"version":3,"sources":["module/external_helpers.ts"],"names":[],"mappings":"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","file":"external_helpers.js","sourcesContent":["import proj4 from \"proj4\";\nimport { EARTH_RADIUS } from \"./constants\";\n\ntype Projection = \"GMAPS\" | \"RT90\" | \"SWEREF99\" | \"WGS84\";\n\n////////////EXPORTED HELPER FUNCTIONS\n//Check Map.helpers for usage.\n\n/** Convert projection of points from 'fromProj' to 'toProj'. */\nexport type convertFromArrayOfArrayType = (\n  fromProj: Projection,\n  toProj: Projection,\n  points: [number, number][]\n) => [number, number][];\nexport const convertFromArrayOfArray: convertFromArrayOfArrayType = (\n  fromProj,\n  toProj,\n  points\n) => {\n  return points.map((point) => proj4(fromProj, toProj, point));\n};\nexport type arrayToLatLngObjectType = (\n  coords: [number, number][],\n  invert: boolean\n) => LatLngLiteral[];\n\n/** Convert coordinates to Google maps LatLngLiterals.  */\nexport const arrayToLatLngObject: arrayToLatLngObjectType = (\n  arr,\n  invert = false\n) =>\n  invert\n    ? arr.map((point) => ({ lat: point[1], lng: point[0] }))\n    : arr.map((point) => ({ lat: point[0], lng: point[1] }));\n\nexport type latLngArrayToCoordArrayType = (\n  latLngArray: LatLngLiteral[],\n  invert: boolean\n) => [number, number][];\n/** Convert array of latlng to coordinates. */\nexport const latLngArrayToCoordArray: latLngArrayToCoordArrayType = (\n  arr,\n  invert\n) =>\n  invert\n    ? arr.map((point) => [point.lng, point.lat] as [number, number])\n    : arr.map((point) => [point.lat, point.lng] as [number, number]);\n/** Returns numberOfPoints around circle at p with r radius. */\nexport const makePointsAroundCircleRT90 = (\n  point: number[],\n  r: number,\n  numberOfPoints: number\n): [number, number][] => {\n  const points = [];\n  for (let i = 0; i < numberOfPoints; i += 1) {\n    points.push([\n      point[0] + r * Math.cos((2 * Math.PI * i) / numberOfPoints),\n      point[1] + r * Math.sin((2 * Math.PI * i) / numberOfPoints),\n    ] as [number, number]);\n  }\n\n  return points;\n};\n/** Create an RT90 rectangle from two points. */\nexport const makeRectRT90 = (\n  p1: number[],\n  p2: number[]\n): [number, number][] => [\n  [p1[0], p1[1]],\n  [p2[0], p1[1]],\n  [p2[0], p2[1]],\n  [p1[0], p2[1]],\n];\n/** Move point by adding coordinates to point position. */\nexport const movePointsByCoord = (\n  points_arr: [number, number][],\n  coord: number[]\n): [number, number][] =>\n  points_arr.map(\n    (point) => [point[0] + coord[0], point[1] + coord[1]] as [number, number]\n  );\n\nconst squared = (x: number): number => x * x;\nconst toRad = (x: number): number => (x * Math.PI) / 180;\n/** Calculates Haversine distance between two points on earth. Result in meter.*/\nexport const haversineDistance = (\n  a: LatLngLiteral,\n  b: LatLngLiteral\n): number => {\n  const aLat = a.lat;\n  const bLat = b.lat;\n  const aLng = a.lng;\n  const bLng = b.lng;\n  const dLat = toRad(bLat - aLat);\n  const dLon = toRad(bLng - aLng);\n\n  const f =\n    squared(Math.sin(dLat / 2.0)) +\n    Math.cos(toRad(aLat)) *\n      Math.cos(toRad(bLat)) *\n      squared(Math.sin(dLon / 2.0));\n  const c = 2 * Math.atan2(Math.sqrt(f), Math.sqrt(1 - f));\n\n  return EARTH_RADIUS * c;\n};\n\nexport type MVCArrayToObjArrayType = (\n  MVCArr: google.maps.MVCArray<google.maps.LatLng>\n) => LatLngLiteral[];\n/** Convert a google maps MVC Array to an array of LatLngLiterals. */\nexport const MVCArrayToObjArray: MVCArrayToObjArrayType = (MVCArr) => {\n  return MVCArr.getArray().map((gmapsLatLng) => {\n    return {\n      lat: gmapsLatLng.lat(),\n      lng: gmapsLatLng.lng(),\n    };\n  });\n};\n\nexport type MVCArrayToCoordArrayType = (\n  MVCArr: google.maps.MVCArray<google.maps.LatLng>\n) => number[][];\n\n/** Convert a google maps MVC Array to an array of coordinates. */\nexport const MVCArrayToCoordArray: MVCArrayToCoordArrayType = (MVCArr) => {\n  return MVCArr.getArray().map((gmapsLatLng) => {\n    return [gmapsLatLng.lat(), gmapsLatLng.lng()];\n  });\n};\nexport const arrayRT90ToWGS84 = (\n  rt90arr: [number, number][]\n): [number, number][] => convertFromArrayOfArray(\"RT90\", \"WGS84\", rt90arr);\n/** Convert an array of rt90 coordinates to WGS84. */\nexport const arrayRT90ToWGS84LatLngObj = (\n  rt90arr: [number, number][]\n): LatLngLiteral[] =>\n  arrayToLatLngObject(convertFromArrayOfArray(\"RT90\", \"WGS84\", rt90arr), true);\n"]}