{"version":3,"sources":["../src/module/WrappedMapBase.tsx"],"names":[],"mappings":"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","file":"WrappedMapBase.js","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport MarkerClusterer, {\n  MarkerClustererOptions,\n  ClusterIconStyle,\n} from \"@google/markerclustererplus\";\nimport ScriptCache from \"./ScriptCache\";\nimport * as feature_helpers from \"./feature_helpers\";\nimport * as map_funcs from \"./map_functions\";\nimport {\n  panZoomToObjectOrFeature,\n  setMarker,\n  setPolygon,\n  setPolyline,\n  unsetMapObject,\n} from \"./internal_helpers\";\nimport {\n  GMW_LatLngBoundsLiteral,\n  GMW_LatLngLiteral,\n  GMW_LatLng,\n  GMW_PolylineOptionsSet,\n  GMW_PolygonOptionsSet,\n  GMW_MarkerOptionsSet,\n  GMW_PolylineOptions,\n  GMW_PolygonOptions,\n  GMW_WrappedPolyline,\n  GMW_WrappedPolygon,\n  GMW_WrappedMarker,\n  GMW_FeatureOptionsSet,\n  GMW_WrappedFeature,\n  GMW_DrawingCB,\n  GMW_Services,\n  GMW_LatLngBounds,\n  GMW_GeoJSONFeatureCollection,\n  GMW_GeoJSONFeature,\n} from \".\";\n\n// type AnyObjectOptions =\n//   | GMW_MarkerOptions\n//   | GMW_PolylineOptions\n//   | GMW_PolygonOptions;\n\nexport interface MapObjects {\n  marker: {\n    [id: string]: GMW_WrappedMarker;\n    [id: number]: GMW_WrappedMarker;\n  };\n  polygon: {\n    [id: string]: GMW_WrappedPolygon;\n    [id: number]: GMW_WrappedPolygon;\n  };\n  polyline: {\n    [id: string]: GMW_WrappedPolyline;\n    [id: number]: GMW_WrappedPolyline;\n  };\n  features: {\n    [id: string]: GMW_WrappedFeature;\n    [id: number]: GMW_WrappedFeature;\n  };\n}\nexport interface CuttingState {\n  enabled: boolean;\n  id: string | number | null;\n  indexes: number[] | null;\n  arr: GMW_LatLngLiteral[];\n}\nexport interface CuttingObjects {\n  [key: string]: any;\n  hover_scissors?: any;\n}\n\nexport type ExportedFunctions = {\n  getBoundsLiteral: () => GMW_LatLngBoundsLiteral | undefined;\n  getBounds: () => GMW_LatLngBounds | undefined;\n  setCenter: (lat_lng: GMW_LatLngLiteral | GMW_LatLng) => Promise<void>;\n  setBounds: (\n    lat_lng_bounds: GMW_LatLngBoundsLiteral | GMW_LatLngBounds\n  ) => Promise<void>;\n  toPixel: (lat_lng_pixel: GMW_LatLng | GMW_LatLngLiteral) => [number, number];\n  setZoom: (zoom_level: number) => Promise<void>;\n  setPolyline: (\n    id: string | number,\n    options: GMW_PolylineOptionsSet\n  ) => Promise<GMW_WrappedPolyline>;\n  setPolygon: (\n    id: string | number,\n    options: GMW_PolygonOptionsSet\n  ) => Promise<GMW_WrappedPolygon>;\n  unsetPolyline: (id: string | number) => Promise<boolean>;\n  unsetPolygon: (id: string | number) => Promise<boolean>;\n  unsetMarker: (id: string | number) => Promise<boolean>;\n  clearPolylines: () => Promise<boolean[]>;\n  clearPolygons: () => Promise<boolean[]>;\n  clearFeatureCollections: (\n    map_objects: MapObjects,\n    feature_layer: google.maps.Data,\n    feature_layers: google.maps.Data[]\n  ) => void;\n  setMarker: (\n    id: string | number,\n    options: GMW_MarkerOptionsSet\n  ) => Promise<GMW_WrappedMarker>;\n  clearMarkers: () => Promise<boolean[]>;\n  setGeoJSONCollection: (\n    collection: GMW_GeoJSONFeatureCollection,\n    options: GMW_FeatureOptionsSet\n  ) => Promise<{\n    layer: google.maps.Data;\n    features: GMW_WrappedFeature[];\n  }>;\n  setGeoJSONFeature: (\n    feature: GMW_GeoJSONFeature,\n    options: GMW_FeatureOptionsSet\n  ) => Promise<GMW_WrappedFeature>;\n  zoomToObject: (\n    item:\n      | GMW_WrappedMarker\n      | GMW_WrappedPolygon\n      | GMW_WrappedPolyline\n      | GMW_WrappedFeature\n  ) => void;\n  panToObject: (\n    item:\n      | GMW_WrappedMarker\n      | GMW_WrappedPolygon\n      | GMW_WrappedPolyline\n      | GMW_WrappedFeature\n  ) => void;\n  setDrawingMode: (\n    type: \"polyline\" | \"polygon\",\n    opts: GMW_PolylineOptions | GMW_PolygonOptions,\n    cb: GMW_DrawingCB\n  ) => void;\n  cancelDrawingMode: (debug_src?: string) => void;\n  setCuttingMode: (\n    polyline_id: string | number,\n    cb?: (segments: GMW_LatLngLiteral[][] | null) => void\n  ) => void;\n  cuttingPositionUpdate: (mouse_event: google.maps.MouseEvent) => void;\n  cuttingClick: (mouse_event: google.maps.MouseEvent) => void;\n  completeCuttingMode: () => GMW_LatLngLiteral[][];\n  cancelCuttingMode: () => void;\n  registerDragStartCB: (cb: () => void) => number;\n  unregisterDragStartCB: (cb: () => void) => void;\n  registerDragEndCB: (cb: () => void) => number;\n  unregisterDragEndCB: (cb: () => void) => void;\n  getClusterers: () => Promise<MarkerClusterer[]>;\n  setClusterer: (\n    clusterer_options: MarkerClustererOptions\n  ) => Promise<MarkerClusterer>;\n  unsetClusterer: (clusterer: MarkerClusterer) => void;\n  createClustererStyle: typeof MarkerClusterer.withDefaultStyle;\n  /** Ensure to only use after map initialization. */\n  getServices: () => GMW_Services;\n};\n\ninterface DrawingListenerObject {\n  listener?: google.maps.MapsEventListener;\n  cancel: boolean;\n}\ninterface CuttingListenerObject {\n  listener?: (segments: GMW_LatLngLiteral[][] | null) => void;\n  cancel: boolean;\n}\ninterface EventCallbacks {\n  onCenterChanged?: () => void;\n  onBoundsChanged?: () => void;\n  onClick?: (e: google.maps.MouseEvent) => void;\n  onDoubleClick?: (e: google.maps.MouseEvent) => void;\n  onDrag?: () => void;\n  onDragEnd?: () => void;\n  onDragStart?: () => void;\n  onHeadingChanged?: () => void;\n  onIdle?: () => void;\n  onMapTypeIdChanged?: () => void;\n  onMouseMove?: (e: google.maps.MouseEvent) => void;\n  onMouseOut?: (e: google.maps.MouseEvent) => void;\n  onMouseOver?: (e: google.maps.MouseEvent) => void;\n  onProjectionChanged?: () => void;\n  onResize?: () => void;\n  onRightClick?: (e: google.maps.MouseEvent) => void;\n  onTilesLoaded?: () => void;\n  onTiltChanged?: () => void;\n  onZoomChanged?: () => void;\n}\ntype CallbackName = keyof EventCallbacks;\n\nexport interface MapBaseProps extends EventCallbacks {\n  initializedCB?: (map: google.maps.Map, funcs: ExportedFunctions) => void;\n  googleapi_maps_uri: string;\n  id?: string;\n  default_center: GMW_LatLngLiteral;\n  default_zoom: number;\n  default_options?: object;\n  styles?: object;\n  verbose?: true;\n}\n\nconst basic_event_names = [\n  \"center_changed\",\n  \"heading_changed\",\n  \"maptypeid_changed\",\n  \"projection_changed\",\n  \"resize\",\n  \"tilesloaded\",\n  \"tilt_changed\",\n  \"zoom_changed\",\n  \"mouseout\",\n  \"mouseover\",\n];\n\nconst event_name_to_callback_name: {\n  [key: string]: CallbackName;\n} = {\n  center_changed: \"onCenterChanged\",\n  heading_changed: \"onHeadingChanged\",\n  maptypeid_changed: \"onMapTypeIdChanged\",\n  projection_changed: \"onProjectionChanged\",\n  resize: \"onResize\",\n  tilesloaded: \"onTilesLoaded\",\n  tilt_changed: \"onTiltChanged\",\n  zoom_changed: \"onZoomChanged\",\n  mouseout: \"onMouseOut\",\n  mousemove: \"onMouseMove\",\n  mouseover: \"onMouseOver\",\n  rightclick: \"onRightClick\",\n  idle: \"onIdle\",\n  drag: \"onDrag\",\n  dragstart: \"onDragStart\",\n  dragend: \"onDragEnd\",\n  click: \"onClick\",\n};\n\nconst onMapEvent = (\n  event_callbacks: EventCallbacks,\n  event_name: CallbackName,\n  e?: any\n): void => {\n  const cb = event_callbacks[event_name];\n  cb && cb(e);\n};\n\nexport const WrappedMapBase: React.FunctionComponent<MapBaseProps> = (\n  props\n) => {\n  const {\n    googleapi_maps_uri,\n    default_center,\n    default_options,\n    default_zoom,\n    onDoubleClick,\n    onBoundsChanged,\n    onCenterChanged,\n    onClick,\n    onDrag,\n    onDragEnd,\n    onDragStart,\n    onHeadingChanged,\n    onIdle,\n    onMapTypeIdChanged,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onProjectionChanged,\n    onResize,\n    onRightClick,\n    onTilesLoaded,\n    onTiltChanged,\n    onZoomChanged,\n    styles,\n    initializedCB,\n  } = props;\n\n  const [script_cache] = useState<any>(\n    ScriptCache({\n      google: googleapi_maps_uri,\n    })\n  );\n\n  const verbose = props.verbose || false;\n\n  const [clusterers] = useState<MarkerClusterer[]>([]);\n  const [map, setMap] = useState<google.maps.Map>();\n  const [do_after_init] = useState<((map: google.maps.Map) => void)[]>([]);\n  const [do_on_drag_end] = useState<(() => void)[]>([]);\n  const [do_on_drag_start] = useState<(() => void)[]>([]);\n  const [drawing_completed_listener] = useState<DrawingListenerObject>({\n    cancel: false,\n  });\n  const [features_layer, setFeaturesLayer] = useState<google.maps.Data>();\n  const [feature_layers] = useState<google.maps.Data[]>();\n  const [map_objects] = useState<MapObjects>({\n    marker: {},\n    polygon: {},\n    polyline: {},\n    features: {},\n  });\n  const [cutting_objects] = useState<CuttingObjects>({});\n  const [overlay, setOverlay] = useState<google.maps.OverlayView>();\n\n  const [cutting] = useState<CuttingState>({\n    enabled: false,\n    id: null,\n    indexes: null,\n    arr: [],\n  });\n  const [cutting_completed_listener] = useState<CuttingListenerObject>({\n    cancel: false,\n  });\n  const [services, setServices] = useState<GMW_Services>();\n  const html_element_ref = useRef(null);\n  const [funcs, setFuncs] = useState<ExportedFunctions>();\n  const [event_callbacks] = useState<EventCallbacks>({});\n\n  const ic = <T extends any>(\n    fn: (map: google.maps.Map) => Promise<T>\n  ): Promise<T> =>\n    new Promise((resolve, reject) => {\n      if (!map) {\n        do_after_init.push((map) => {\n          fn(map).then(resolve).catch(reject);\n        });\n      } else {\n        fn(map).then(resolve);\n      }\n    });\n\n  useEffect(() => {\n    if (!html_element_ref.current) {\n      throw new Error(\"html element not found.\");\n    }\n\n    script_cache.google.onLoad(() => {\n      const center = default_center;\n      if (!center) {\n        throw new Error(\n          \"Could not create map: Requires 'default_center' prop.\"\n        );\n      }\n      const zoom = typeof default_zoom !== \"undefined\" ? default_zoom : null;\n      if (!zoom) {\n        throw new Error(\"Could not create map: Requires 'default_zoom' prop.\");\n      }\n      if (!googleapi_maps_uri) {\n        throw new Error(\n          \"Could not create map: Requires 'googleapi_maps_uri' prop. Ex: https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,places,drawing&key=XXXXXXXXXX\"\n        );\n      }\n      const defaults = default_options || {};\n      const mapConfig = Object.assign({}, defaults, {\n        center: new window.google.maps.LatLng(center.lat, center.lng),\n        zoom: zoom,\n        gestureHandling: \"greedy\",\n        styles: styles || {},\n      });\n      const maps = window.google.maps;\n      const initial_map = new maps.Map(html_element_ref.current, mapConfig);\n      setMap(initial_map);\n    });\n    return () => {\n      if (map) {\n        window.google.maps.event.clearInstanceListeners(map);\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n    const initial_services: GMW_Services = {\n      geocoderService: new window.google.maps.Geocoder(),\n      directionsService: new window.google.maps.DirectionsService(),\n      places:\n        window.google.maps.places &&\n        new window.google.maps.places.PlacesService(map),\n    };\n    if (window.google.maps.drawing) {\n      initial_services.drawing = window.google.maps.drawing;\n      initial_services.drawingManager = new window.google.maps.drawing.DrawingManager(\n        {\n          drawingMode: null,\n          drawingControl: false,\n          drawingControlOptions: {\n            drawingModes: [],\n          },\n        }\n      );\n      initial_services.drawingManager.setMap(map);\n    }\n\n    setServices(initial_services);\n  }, [map]);\n  useEffect(() => {\n    if (!map || !services) {\n      return;\n    }\n    setFuncs({\n      getBoundsLiteral: () => map_funcs.getBoundsLiteral(map),\n      getBounds: () => map_funcs.getBounds(map),\n      setCenter: (lat_lng) =>\n        ic<void>((map) => map_funcs.setCenter(map, lat_lng)),\n      setBounds: (lat_lng) =>\n        ic<void>((map) => map_funcs.setBounds(map, lat_lng)),\n      toPixel: (lat_lng_pixel) =>\n        map_funcs.toPixel(lat_lng_pixel, html_element_ref, overlay),\n      setZoom: (zoom_level) => ic((map) => map_funcs.setZoom(zoom_level, map)),\n      setPolyline: (id, options) =>\n        ic((map) =>\n          setPolyline(verbose, map, map_objects, cutting, id, options)\n        ),\n      setPolygon: (id, options) =>\n        ic((map: google.maps.Map) =>\n          setPolygon(verbose, map, map_objects, cutting, id, options)\n        ),\n      unsetPolyline: (id) =>\n        unsetMapObject(verbose, map_objects, cutting, \"polyline\", id),\n      unsetPolygon: (id) =>\n        unsetMapObject(verbose, map_objects, cutting, \"polygon\", id),\n      clearPolylines: () =>\n        map_funcs.clearPolylines(verbose, map_objects, cutting),\n      clearPolygons: () =>\n        map_funcs.clearPolygons(verbose, map_objects, cutting),\n      setMarker: (id, options) =>\n        ic((map) => setMarker(verbose, map, map_objects, cutting, id, options)),\n      unsetMarker: (id) =>\n        unsetMapObject(verbose, map_objects, cutting, \"marker\", id),\n      clearMarkers: () => map_funcs.clearMarkers(verbose, map_objects, cutting),\n      setGeoJSONCollection: (collection, options) =>\n        ic((map) =>\n          feature_helpers.setGeoJSONCollection(\n            map,\n            map_objects,\n            collection,\n            options\n          )\n        ),\n      setGeoJSONFeature: (feature, options) =>\n        ic((map) => {\n          if (!features_layer) {\n            throw new Error(\"features layer not loaded.\");\n          }\n          return feature_helpers.setGeoJSONFeature(\n            map,\n            map_objects,\n            features_layer,\n            feature,\n            options\n          );\n        }),\n      clearFeatureCollections: () => {\n        if (!features_layer || !feature_layers) {\n          throw new Error(\"features/feature layer/layers not loaded.\");\n        }\n        map_funcs.clearFeatureCollections(\n          map_objects,\n          features_layer,\n          feature_layers\n        );\n      },\n      zoomToObject: (item) => map && panZoomToObjectOrFeature(map, item, true),\n      panToObject: (item) => map && panZoomToObjectOrFeature(map, item, false),\n      setDrawingMode: (type, opts, cb) => {\n        map_funcs.setDrawingMode(\n          services,\n          type,\n          opts,\n          cb,\n          drawing_completed_listener\n        );\n      },\n      cancelDrawingMode: (debug_src) => {\n        if (!drawing_completed_listener.listener) {\n          if (debug_src) {\n            console.log(\n              \"Cancel drawing before listener was attached, call from: \" +\n                debug_src\n            );\n          }\n          return;\n        }\n\n        map_funcs.endDrawingMode(\n          services,\n          drawing_completed_listener,\n          true,\n          debug_src\n        );\n      },\n      setCuttingMode: (polyline_id, cb) => {\n        console.log(\"polyline_id:\", polyline_id);\n        drawing_completed_listener &&\n          cutting_completed_listener &&\n          map_funcs.setCuttingMode(\n            services,\n            map,\n            map_objects,\n            cutting,\n            cutting_objects,\n            default_center,\n            drawing_completed_listener,\n            polyline_id,\n            cutting_completed_listener,\n            cb\n          );\n      },\n      cuttingPositionUpdate: (mouse_event) =>\n        map_funcs.cuttingPositionUpdate(\n          mouse_event,\n          map_objects,\n          cutting,\n          cutting_objects\n        ),\n      cuttingClick: (mouse_event) =>\n        map_funcs.cuttingClick(\n          mouse_event,\n          map,\n          map_objects,\n          cutting,\n          cutting_objects\n        ),\n      completeCuttingMode: () =>\n        (cutting_completed_listener &&\n          map_funcs.completeCuttingMode(\n            map_objects,\n            cutting,\n            cutting_objects,\n            cutting_completed_listener\n          )) ||\n        [],\n      cancelCuttingMode: () => {\n        map_funcs.cancelCuttingMode(\n          map_objects,\n          cutting,\n          cutting_objects,\n          cutting_completed_listener\n        );\n      },\n      registerDragStartCB: (cb) => do_on_drag_end.push(cb),\n      unregisterDragStartCB: (cb) => {\n        const index = do_on_drag_start.indexOf(cb);\n        if (index > -1) {\n          do_on_drag_start.splice(index, 1);\n        }\n      },\n      registerDragEndCB: (cb) => do_on_drag_end.push(cb),\n      unregisterDragEndCB: (cb) => {\n        const index = do_on_drag_end.indexOf(cb);\n        if (index > -1) {\n          do_on_drag_end.splice(index, 1);\n        }\n      },\n      /** *Never use the MarkerClusterer.clearMarkers() function, use the maps unsetClusterer instead!*\n       *  NOTE: This will make marker.show() and marker.hide() not function properly, since visibility is controlled by the cluster.\n       */\n      setClusterer: (clusterer_options) =>\n        ic((map) => {\n          const clusterer = new MarkerClusterer(map, [], clusterer_options);\n          clusterers.push(clusterer);\n          return Promise.resolve(clusterer);\n        }),\n      /** *Never use the MarkerClusterer.clearMarkers() function, use the maps unsetClusterer instead!*\n       *  NOTE: This will make marker.show() and marker.hide() not function properly, since visibility is controlled by the cluster.\n       */\n      getClusterers: () => ic(() => Promise.resolve([...clusterers])),\n      unsetClusterer: (clusterer) => {\n        clusterer.removeMarkers(clusterer.getMarkers());\n        const index = clusterers.indexOf(clusterer);\n        if (index > -1) {\n          clusterers.splice(index, 1);\n        }\n      },\n      createClustererStyle: (styling: ClusterIconStyle) =>\n        MarkerClusterer.withDefaultStyle(styling),\n      getServices: () => {\n        return services;\n      },\n    });\n\n    //\n    //\n    //\n    const initial_features_layer = new window.google.maps.Data();\n    setFeaturesLayer(initial_features_layer);\n    initial_features_layer.setMap(map);\n    feature_helpers.setupLayerEvents(map_objects, initial_features_layer);\n    //eslint-disable-next-line\n    function CanvasProjectionOverlay() {}\n    CanvasProjectionOverlay.prototype = new window.google.maps.OverlayView();\n    CanvasProjectionOverlay.prototype.constructor = CanvasProjectionOverlay;\n    CanvasProjectionOverlay.prototype.onAdd = () => {\n      /***/\n    };\n    CanvasProjectionOverlay.prototype.draw = () => {\n      /***/\n    };\n    CanvasProjectionOverlay.prototype.onRemove = () => {\n      /***/\n    };\n    const initial_overlay = new (CanvasProjectionOverlay as any)(/***/);\n    setOverlay(initial_overlay);\n    if (initial_overlay) {\n      initial_overlay.setMap(map);\n    }\n  }, [services]);\n\n  useEffect(() => {\n    if (!funcs || !map || !features_layer || !services) {\n      return;\n    }\n    basic_event_names.forEach((event_name) => {\n      map.addListener(event_name, (e) =>\n        onMapEvent(event_callbacks, event_name_to_callback_name[event_name], e)\n      );\n    });\n\n    map.addListener(\"click\", (mouse_event) => {\n      if (!funcs) {\n        throw new Error(\"funcs is undefined\");\n      }\n      cutting.enabled && funcs.cuttingClick(mouse_event);\n      !cutting.enabled && onMapEvent(event_callbacks, \"onClick\", mouse_event);\n    });\n    map.addListener(\n      \"dblclick\",\n      (mouse_event) =>\n        !cutting.enabled &&\n        onMapEvent(event_callbacks, \"onDoubleClick\", mouse_event)\n    );\n    map.addListener(\n      \"drag\",\n      () => !cutting.enabled && onMapEvent(event_callbacks, \"onDrag\")\n    );\n    map.addListener(\n      \"dragend\",\n      () => !cutting.enabled && onMapEvent(event_callbacks, \"onDragEnd\")\n    );\n    map.addListener(\"dragstart\", () => {\n      do_on_drag_start.forEach((cb) => {\n        if (!cutting.enabled) {\n          cb();\n        }\n      });\n      !cutting.enabled && onMapEvent(event_callbacks, \"onDragStart\");\n    });\n\n    map.addListener(\"idle\", () => {\n      do_on_drag_end.forEach((cb) => {\n        if (!cutting.enabled) {\n          cb();\n        }\n      });\n      !cutting.enabled && onMapEvent(event_callbacks, \"onIdle\");\n    });\n    map.addListener(\"mousemove\", (mouse_event: google.maps.MouseEvent) => {\n      if (cutting.enabled) {\n        if (!funcs) {\n          throw new Error(\"funcs is undefined\");\n        }\n        funcs.cuttingPositionUpdate(mouse_event);\n      }\n      onMapEvent(event_callbacks, \"onMouseMove\", mouse_event);\n    });\n\n    map.addListener(\"rightclick\", (mouse_event: google.maps.MouseEvent) => {\n      !cutting.enabled &&\n        onMapEvent(event_callbacks, \"onRightClick\", mouse_event);\n    });\n\n    window.google.maps.event.addListenerOnce(map, \"idle\", () =>\n      doAfterInit(map)\n    );\n  }, [funcs, features_layer]);\n\n  useEffect(() => {\n    if (!funcs || !map || !features_layer || !services) {\n      return;\n    }\n    const cb_names: CallbackName[] = [\n      \"onDoubleClick\",\n      \"onBoundsChanged\",\n      \"onCenterChanged\",\n      \"onClick\",\n      \"onDrag\",\n      \"onDragEnd\",\n      \"onDragStart\",\n      \"onHeadingChanged\",\n      \"onIdle\",\n      \"onMapTypeIdChanged\",\n      \"onMouseMove\",\n      \"onMouseOut\",\n      \"onMouseOver\",\n      \"onProjectionChanged\",\n      \"onResize\",\n      \"onRightClick\",\n      \"onTilesLoaded\",\n      \"onTiltChanged\",\n      \"onZoomChanged\",\n    ];\n    cb_names.forEach((cb_name) => {\n      (event_callbacks[cb_name] as any) = props[cb_name] as any;\n    });\n  }, [\n    onDoubleClick,\n    onBoundsChanged,\n    onCenterChanged,\n    onClick,\n    onDrag,\n    onDragEnd,\n    onDragStart,\n    onHeadingChanged,\n    onIdle,\n    onMapTypeIdChanged,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onProjectionChanged,\n    onResize,\n    onRightClick,\n    onTilesLoaded,\n    onTiltChanged,\n    onZoomChanged,\n  ]);\n\n  const doAfterInit = (map: google.maps.Map): void => {\n    do_after_init.forEach((cb) => {\n      cb(map);\n    });\n\n    if (initializedCB) {\n      //Tell parent we are initialized if the parent has asked for it.\n      if (!funcs) {\n        throw new Error(\"funcs is undefined\");\n      }\n      initializedCB(map, funcs);\n    }\n  };\n\n  return (\n    <div style={{ height: \"100%\" }}>\n      <div\n        ref={html_element_ref}\n        style={{\n          position: \"absolute\",\n          top: \"0\",\n          left: \"0\",\n          right: \"0\",\n          bottom: \"0\",\n        }}\n      />\n    </div>\n  );\n};\nexport default WrappedMapBase;\n"]}